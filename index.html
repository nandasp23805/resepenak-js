<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resep Makanan</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #fffcde;
    }
    .bg-card {
      background-color: rgba(255, 255, 255, 0.9);
    }
    .home-bg {
      background-image: url('image/background.jpg'); /* Ganti dengan URL gambar latar belakang yang diinginkan */
      background-size: cover;
      background-position: center;
      padding: 20px;
      border-radius: 10px;
    }
    .resip-detail {
      display: none;
    }
    @media (min-width: 768px) {
      .sidebar {
        width: 250px;
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        background-color: #ffa600;
        padding-top: 1rem;
        font-family: Arial, sans-serif;
        justify-content: center;
        align-items: center;
      }
      .content {
        margin-left: 250px;
      }
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <nav class="navbar navbar-expand-md navbar-dark bg-dark sidebar">
    <div class="container-fluid flex-md-column align-items-start">
      <a class="navbar-brand d-flex align-items-center mb-3" href="#">
        <img src="image/nda.png" alt="Logo" style="width: 45px; height: 45px;" class="me-2">
        <span class="fs-5">Resep Makanan</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse w-100" id="sidebarMenu">
        <ul class="nav nav-pills flex-column w-100">
          <li class="nav-item mb-2">
            <a href="#" class="nav-link px-3" onclick="showPage('home')">üè† Home</a>
          </li>
          <li class="nav-item mb-2">
            <a href="#" class="nav-link px-3" onclick="showPage('resep')">‚ûï Resep</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main content -->
  <main class="content p-4">
    <!-- Halaman Home -->
    <div id="homePage" class="home-bg">
      <h1 class="text-center mb-4">Selamat Datang di Resep Makanan</h1>
      <img src="image/logo.png" alt="Logo" class="d-block mx-auto mb-3" style="width: 200px; height: auto;"/>
      <p class="text-center font-family: Arial, sans-serif;">Temukan dan kelola resep makanan Anda dengan mudah.</p>
    </div>

    <!-- Halaman Resep (form + list), disembunyikan saat awal -->
    <div id="resepPage" style="display: none;">
      <h2 class="text-center mb-3">Tambah Resep</h2>
      <form class="bg-card p-4 rounded shadow mb-5">
        <div class="mb-3">
          <label for="judul" class="form-label">Judul</label>
          <input type="text" class="form-control" id="judul" placeholder="Masukkan judul" required>
        </div>
        <div class="mb-3">
          <label for="alat" class="form-label">Alat</label>
          <input type="text" class="form-control" id="alat" placeholder="Masukkan alat" required>
        </div>
        <div class="mb-3">
          <label for="bahan" class="form-label">Bahan</label>
          <input type="text" class="form-control" id="bahan" placeholder="Masukkan bahan" required>
        </div>
        <div class="mb-3">
          <label for="steps" class="form-label">Langkah-langkah</label>
          <div id="stepsContainer">
            <div class="input-group mb-2">
              <span class="input-group-text">1.</span>
              <input type="text" class="form-control" placeholder="Masukkan langkah" onkeypress="tambahLangkah(event)">
              <button type="button" class="btn btn-danger" onclick="hapusLangkah(this)">‚ùå</button>
            </div>
          </div>
        </div>
        <button type="button" onclick="simpanResep()" class="btn btn-primary">Simpan</button>
      </form>

      <!-- List Resep -->
      <div class="row" id="list">
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const resepList = [];

    function showPage(page) {
      document.getElementById('homePage').style.display = (page === 'home') ? 'block' : 'none';
      document.getElementById('resepPage').style.display = (page === 'resep') ? 'block' : 'none';
    }

    function simpanResep() {
      const judul = document.getElementById('judul').value;
      const alat = document.getElementById('alat').value;
      const bahan = document.getElementById('bahan').value;
      const stepsElements = document.querySelectorAll('#stepsContainer input');
      const steps = Array.from(stepsElements).map(input => input.value).filter(value => value);

      const resep = { judul, alat, bahan, steps };
      resepList.push(resep);
      document.getElementById('judul').value = '';
      document.getElementById('alat').value = '';
      document.getElementById('bahan').value = '';
      document.getElementById('stepsContainer').innerHTML = '<div class="input-group mb-2"><span class="input-group-text">1.</span><input type="text" class="form-control" placeholder="Masukkan langkah" onkeypress="tambahLangkah(event)"><button type="button" class="btn btn-danger" onclick="hapusLangkah(this)">‚ùå</button></div>';

      tampilkanResep();
    }

    function tampilkanResep() {
      const listDiv = document.getElementById('list');
      listDiv.innerHTML = '';

      resepList.forEach((resep, index) => {
        const resepItem = document.createElement('div');
        resepItem.className = 'col-md-4 mb-3';
        resepItem.innerHTML = `
          <div class="card">
            <div class="card-body">
              <h5 class="card-title" onclick="tampilkanDetail(${index})">${resep.judul}</h5>
              <div id="detail${index}" class="resip-detail">
                <p><strong>Alat:</strong> ${resep.alat}</p>
                <p><strong>Bahan:</strong> ${resep.bahan}</p>
                <p><strong>Langkah-langkah:</strong></p>
                <ol>
                  ${resep.steps.map((step) => `<li>${step}</li>`).join('')}
                </ol>
              </div>
            </div>
          </div>
        `;
        listDiv.appendChild(resepItem);
      });
    }

    function tampilkanDetail(index) {
      const detailDiv = document.getElementById(`detail${index}`);
      detailDiv.style.display = (detailDiv.style.display === 'none' || detailDiv.style.display === '') ? 'block' : 'none';
    }

    function tambahLangkah(event) {
      if (event.key === 'Enter') {
        event.preventDefault(); // Mencegah form submit
        const stepsContainer = document.getElementById('stepsContainer');
        const stepCount = stepsContainer.children.length + 1;

        const newStep = document.createElement('div');
        newStep.className = 'input-group mb-2';
        newStep.innerHTML = `<span class="input-group-text">${stepCount}.</span><input type="text" class="form-control" placeholder="Masukkan langkah" onkeypress="tambahLangkah(event)"><button type="button" class="btn btn-danger" onclick="hapusLangkah(this)">‚ùå</button>`;
        stepsContainer.appendChild(newStep);

        // Fokus ke input baru
        newStep.querySelector('input').focus();
      }
    }

    function hapusLangkah(button) {
      const stepsContainer = document.getElementById('stepsContainer');
      const langkah = button.parentElement; // Ambil elemen langkah
      stepsContainer.removeChild(langkah); // Hapus langkah

      // Update nomor urut langkah
      const steps = stepsContainer.querySelectorAll('.input-group');
      steps.forEach((step, index) => {
        step.querySelector('.input-group-text').textContent = index + 1 + '.'; // Menyusun ulang nomor urut
      });
    }
  </script>
</body>
</html>